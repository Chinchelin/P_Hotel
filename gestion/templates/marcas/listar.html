<!-- gestion/templates/inventario/marcas/listar.html -->
{% extends 'base.html' %}
{% load static %}

{% block head %}
<!-- DataTables CSS -->
<link rel="stylesheet" href="{% static 'lib/datatables-1.10.20/css/dataTables.bootstrap4.min.css' %}">
<link rel="stylesheet" href="{% static 'lib/datatables-1.10.20/plugins/responsive-2.2.3/css/responsive.bootstrap4.min.css' %}">
<!-- Font Awesome -->
<link rel="stylesheet" href="{% static 'lib/fontawesome-free/css/all.min.css' %}">
<style>
    .btn-group-sm > .btn, .btn-sm {
        padding: 0.25rem 0.5rem;
        font-size: 0.875rem;
        line-height: 1.5;
        border-radius: 0.2rem;
    }
    .btn-actions {
        white-space: nowrap;
    }
    .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
</style>
{% endblock %}

{% block content %}
<div class="card card-primary">
    <div class="card-header">
        <h3 class="card-title">Lista de Marcas</h3>
        <a href="{% url 'marcas_crear' %}" class="btn btn-success btn-sm">
           <i class="fa-solid fa-user-plus"></i> Crear Marca
        </a>
    </div>
    
    <div class="card-body">
        <table id="tabla" class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Descripción</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for marca in object_list %}
                <tr>
                    <td>{{ marca.id }}</td>
                    <td>{{ marca.nombre }}</td>
                    <td>{{ marca.descripcion|default:"-" }}</td>
                    <td class="btn-actions">
                        <div class="btn-group">
                            <!-- Botón Buscar -->
                            <a href="{% url 'marcas_ver' marca.id %}" class="btn btn-info btn-sm" title="Ver detalles">
                               <i class="fa-solid fa-eye"></i>
                            </a>
                            <!-- Botón Editar -->
                            <a href="{% url 'marcas_editar' marca.id %}" class="btn btn-warning btn-sm" title="Editar">
                                <i class="fas fa-edit"></i>
                            </a>
                            <!-- Botón Eliminar -->
                            <a href="{% url 'marcas_eliminar' marca.id %}" class="btn btn-danger btn-sm" title="Eliminar">
                                <i class="fas fa-trash"></i>
                            </a>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

{% block js %}
<!-- DataTables JS -->
<script src="{% static 'lib/datatables-1.10.20/js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'lib/datatables-1.10.20/js/dataTables.bootstrap4.min.js' %}"></script>
<script src="{% static 'lib/datatables-1.10.20/plugins/responsive-2.2.3/js/dataTables.responsive.min.js' %}"></script>
<script src="{% static 'lib/datatables-1.10.20/plugins/responsive-2.2.3/js/responsive.bootstrap4.min.js' %}"></script>

<script>
    $(function () {
        $('#tabla').DataTable({
            responsive: true,
            autoWidth: false,
            language: {
                url: "{% static 'lib/datatables-1.10.20/plugins/Spanish.json' %}",
                search: "Buscar:",
                lengthMenu: "Mostrar _MENU_ registros por página",
                info: "Mostrando _START_ a _END_ de _TOTAL_ registros",
                infoEmpty: "No hay registros disponibles",
                paginate: {
                    first: "Primero",
                    last: "Último",
                    next: "Siguiente",
                    previous: "Anterior"
                }
            },
            columnDefs: [
                {
                    orderable: false,
                    targets: [3] // Columna de acciones no ordenable
                },
                {
                    searchable: false,
                    targets: [3] // Columna de acciones no buscable
                }
            ]
        });
    });
</script>
{% endblock %}