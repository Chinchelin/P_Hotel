<!-- gestion/templates/inventario/marcas/listar.html -->
{% extends 'base.html' %}
{% load static %}

{% block head %}
<!-- DataTables -->
<link rel="stylesheet" href="{% static 'lib/datatables-1.10.20/css/dataTables.bootstrap4.min.css' %}">
<link rel="stylesheet" href="{% static 'lib/datatables-1.10.20/plugins/responsive-2.2.3/css/responsive.bootstrap4.min.css' %}">
<!-- Custom styles -->
<style>
    .card {
        margin-top: 20px;
    }
    .table th, .table td {
        vertical-align: middle;
    }
    .btn-group-actions {
        white-space: nowrap;
    }
</style>
{% endblock %}

{% block content %}
<div class="card card-default">
    <div class="card-header">
        <h3 class="card-title">
            <i class="fas fa-search"></i>
            {{ titulo }}
        </h3>
    </div>
    
    <div class="card-body">
        <table class="table" id="tabla">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Nombre</th>
                    <th scope="col">Descripci√≥n</th>
                    <th scope="col">Opciones</th>
                </tr>
            </thead>
            <tbody>
                {% for marca in object_list %}
                <tr>
                    <td>{{ marca.id }}</td>
                    <td>{{ marca.nombre }}</td>
                    <td>{{ marca.descripcion|default:"-" }}</td>
                    <td class="btn-group-actions">
                        <a href="{% url 'marcas_editar' marca.id %}" class="btn btn-warning btn-sm">
                            <i class="fas fa-edit"></i> Editar
                        </a>
                        <a href="{% url 'marcas_eliminar' marca.id %}" class="btn btn-danger btn-sm">
                            <i class="fas fa-trash"></i> Eliminar
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <div class="card-footer">
        <a href="{{ crear_url }}" class="btn btn-primary btn-flat">
            <i class="fas fa-plus"></i> Nueva Marca
        </a>
    </div>
</div>
{% endblock %}

{% block js %}
<!-- DataTables -->
<script src="{% static 'lib/datatables-1.10.20/js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'lib/datatables-1.10.20/js/dataTables.bootstrap4.min.js' %}"></script>
<script src="{% static 'lib/datatables-1.10.20/plugins/responsive-2.2.3/js/dataTables.responsive.min.js' %}"></script>
<script src="{% static 'lib/datatables-1.10.20/plugins/responsive-2.2.3/js/responsive.bootstrap4.min.js' %}"></script>

<script>
    $(function () {
        $('#tabla').DataTable({
            responsive: true,
            autoWidth: false,
            language: {
                url: "{% static 'lib/datatables-1.10.20/plugins/Spanish.json' %}"
            },
            columnDefs: [
                {
                    orderable: false,
                    targets: [3] // La columna de opciones no es ordenable
                },
                {
                    searchable: false,
                    targets: [3] // La columna de opciones no es buscable
                }
            ]
        });
    });
</script>
{% endblock %}